# Blogged_Up


[![AltSchool Badge](https://img.shields.io/badge/-Engineering-6773E5?style=for-the-badge&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAACHCAYAAAA850oKAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAcmSURBVHgB7d3/kZtGFAfwbzL5P0oF2VRwlwq8qcBKBUcqsFyBSAW5VGBcgS8ViFRwdgW3qeDcgaM3wBy3egu7sBLY9/3MMD6h5QnBg/0ByAARERERERERERERERERERERERERERERERERERERERERERERERFdwHc4DxtR5uNx+hxRbnOcriOWjS1HC7LH6UvEVETGK5RlzYxyFOl75Fco894r816BVu0cyaHt9Fucnt63aKoCWqncyWFxeir/F03d/483X2sj0IrkTo5CmVd5//bdgFYrd3JoVUrd/qv1HFi1rNgPyEeqCOPNkyrFtX9LYkjV0j9bdFVLjWlk+V3795Xy/g5PCVn11oUuTBqdY91Vq5R5NxK3QLiLahDXbf6CuLEX6slZrQxVKR1WLV+RXMlhoI9OOm9eV7X0sdeyUrmSY6vMex8oWynzpvZaHJpLAH+gScb6OP19nH5p5/enGrSIA+KHruVM8eiVfUS4aikiY/ttnj1ocQanO+9+ZJkK8Q3GAtOvrbAtM0OOasUq896PLFMp86ZWLUOYHDPkGOfQdqqc0t8gjbRb3oKX2FdjbnIY6GeODdKP2rkDYpTZ3GrFIq8taDXmJkfudsI52h000ZxqRaoB681zx+k3xJPu52slZg1a3Jzk0KqAGmkXt/zk6OLWuIyXOHTvcIHte4f5F7dCA2J9BaaPc4xVUw7xF+6+lekdIs1pc7zyXjukZ2ToWotFOq0LXB2nh3bi9ZtEU5NDOx3XmKYKxE9VQ08Q004cEEs0Jzl8Y6OiIdpl/BukkxhvQdlMTQ6/Eekw/cyRs2qpjtPv4B1fWUx94s0o8xym00ZUP7eT9p5DeswuXp/By6NtByIiIiIiIqJvwbl+2ecaT9cyZKxB+tUO/KWdr0rO5LBo7huVf4euY9RohtorXNbBe73EOixBrsKa3mt5frnEhWzaFUi9dPyAy45Q+p9f4mVwWOCSvZDEkGdUCqQz7bK8lL5Sc+8+lzu5jDJf2hWf0LQx0Ja5UspKcn04Tr+CbZFvioFeXUjChNocZWCZEufHaiWxWpmjxLQNXkBvf5wbkyMxOeZUK0aZd4dxFZqbeawXSyY3suw1nveGpCrqnq6fy7bxN72YqVVd92BWF0c4pN947ce0eN42+wj9Jy5WowIm32C8Q7PB+pMZKG+hP8nfP/OMPX4ZOnN07R4t5h5xNm3Zx4F1lPVPaXwbNNt4LKYZieOwQLWyg76yue/V3CNP9ziUHB8w727t6/ZzY9dxj3FbDCdFSkyX+H2ysAjvoAJ5uqh7xG+g/udrCaolRxEZcxdYP4O0ndhNfyFsOyHeUII4LJAc4oDhFZYNJ0embFyLNEUgZo1mx5bt31qZgxJPS477NkbRTjLvIfA9/ITbDJSteuv4gPiEMwMxb9t4twMxrRLTYaHkMEg/ciRZiojY2gYolXI7xG0o//0qEM8EPtu/434P/axllJgl4hKuUsrdQz8Tlog7KBwWSg5hkFbnjm1IUSjlh75UqZS/9cpoSRqiJVzplXlI+D7A+E9xbpC2jcQB4weFw4LJ0ZENOiVJbpRYd0q5oTZM1/10van2yqQkm8FwctjEeN06Pg4so7U1ipGYFuMHhcMKkqNj0SSK7ODYKsd6Me5xegTNNbSzU8trZ5aYBvgB4e9VKjFNREznLXM38n50cpzjv9So0WSvHAk/obluIj8FKZfIXWCZvffa39D/YV20NsBHjPvkvTaBv8VnxA1y+Z97hUzOkRw+WfkKzSlSfh/0T6WMxcu4Opsy4hpbNnUUN9rU4XOD0/qwRtwwdonmyPNHNC3CR9+PWBdth2wwvqOuI+L048X4OSFmkqnJ0Q0X+/NqxJFyb5TlO1KN9L+0wbpoO0B2fI1h/o7sVzNyYNz0XnfXVGoMO1sVPLVaCT0Zn2vo3G9UdRsqRGvp1zifO2XefmQZC/334bW/O68xrMDpNr/DCkij098hHyKWC40s2l4ZC73Pv0mIV3jlcvZWxAFx3fKhdfST5R7jPbmOCcQ0XjmHBbqyBnq3VFbYBpaR+feBZXyHQLnrifFyJ4eF/v33eL6DLPSdqO2kIiKmJNo2IaaLKHMWO+hfRiYZ4zi0KyNnlIeBslsl9jXC4ySPGB5DKZR4uZND3GL4+4fek21hAp97yBzTYaHkECXCKxwz7QZiFxPilYFY50gOUSFt/WQHj4323ifGfEA42RwWTA5RIH3oXMrbiNgmMrZs9O1AnHMlBxB/gNSI73ndZorpMDE5cj7UZPA0dB4apZMejnTfSqT3Jgo0O/8Vnt8mKPGkhV5huI9fea/vMNyyTy1v2nW0eP5Li9K1rNt4NdIYPN3ucOXF7NanHokhSdZvyNeIfJgrZ3L0dfdSbnD6OCQRERERERERERERERERERERERERERERERERERERERERERERERERERERncX/Z96oxRsCt/4AAAAASUVORK5CYII=&logoColor=white&link=https://altschoolafrica.com/schools/engineering)](https://altschoolafrica.com/schools/engineering)


##### Blog API



Requirements

- [x] Users should have a first_name, last_name, email, password, (you can add other attributes you want to store about the user)

- [x] A user should be able to sign up and sign in into the blog app

- [x] Use JWT as authentication strategy and expire the token after 1 hour

- [x] A blog can be in two states; draft and published

- [x] Logged in and not logged in users should be able to get a list of published blogs created

- [x] Logged in and not logged in users should be able to to get a published blog

- [x] Logged in users should be able to create a blog.

- [x] When a blog is created, it is in draft state

- [x] The owner of the blog should be able to update the state of the blog to published

- [x] The owner of a blog should be able to edit the blog in draft or published state

- [x] The owner of the blog should be able to delete the blog in draft or published state

- [x] The owner of the blog should be able to get a list of their blogs. 

  - [x] The endpoint should be paginated
  
  - [x] It should be filterable by state
  
- [x] Blogs created should have title, description, tags, author, timestamp, state, read_count, reading_time and body.

- [x] The list of blogs endpoint that can be accessed by both logged in and not logged in users should be paginated, 
  - [x] default it to 20 blogs per page. 

  - [x] It should also be searchable by author, title and tags.

- [x] It should also be orderable by read_count, reading_time and timestamp

- [x] When a single blog is requested, the api should return the user information(the author) with the blog. The read_count of the blog too should be updated by 1

- [x] Come up with any algorithm for calculating the reading_time of the blog.

- [x] Write tests for all endpoints



###### Setup
Install NodeJS, mongodb

###### Models
```js
User field

- first_name: String
- last_name: String
- email: String
- password: String
- token: String


Blog field

- title:  required and unique
- description: String
- author: Strung
- state: draft, enum: ['draft', 'published']
- read_count: Number
- reading_time: String
- tags: Array
- body: String, required
- timestamp: Date
```

###### APIs
```js
Signup User
Route: /auth/signup
Method: POST
Body:

{
  "first_name": "doja1,
  "last_name": "cat1",
  "email": "cat1@yahoo.com",
  "password": "dojacat1"
} ```

Responses
Success
{
  "first_name": "doja1",
  "last_name": "cat1",
  "email": "cat1@yahoo.com",
  "password": "$2b$10$dCmCYEgkP7cjxp8ArI4L3uyYGKLE1BYLZihNyXUTp5eqVNWzAZ066",
  "blogs": [],
  "_id": "6366e830381ba8802a24e5bc",
  "__v": 0
}

Signin User
Route: /auth/signin
Method: POST
Body:
{
  "email": "cat1@yahoo.com",
  "password": "dojacat1"
}

Responses
Success
{
  "_id": "6366e830381ba8802a24e5bc",
  "first_name": "doja1",
  "last_name": "cat1",
  "email": "cat1@yahoo.com",
  "password": "$2b$10$dCmCYEgkP7cjxp8ArI4L3uyYGKLE1BYLZihNyXUTp5eqVNWzAZ066",
  "blogs": [],
  "__v": 0,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2YWxpZFVzZXJfaWQiOiI2MzY2ZTgzMDM4MWJhODgwMmEyNGU1YmMiLCJlbWFpbCI6ImNhdDFAeWFob28uY29tIiwiaWF0IjoxNjY3Njg4NjgyLCJleHAiOjE2Njc2OTIyODJ9.XJt1mdAP1zvdPs-kJxfLallyX9lxMB6v-lpBtS5zEuY"
}


Create Blog
Route: /blog
Method: POST
Header
Authorization: Bearer {token}
Body:
 { title: "Honey Dew", description: "a honey dew book", author: "Doja", tags: ["honey"], body:"A honey dew book by a known author and defined tags" } 

Responses
Success
{
  "status": true,
  "savedBlog": {
    "title": "Honey Dew",
    "description": "a honey dew book",
    "author": "Doja",
    "state": "draft",
    "read_count": 1,
    "reading_time": "1 minute(s)",
    "tags": [
      "honey"
    ],
    "body": "A honey dew book by a known author and defined tags",
    "timestamp": "2022-11-05T22:58:43.843Z",
    "user": "6366e830381ba8802a24e5bc",
    "id": "6366eaa3381ba8802a24e5c0"
  }
}


Get Published States
Route: /blog
Method: GET
Responses
Success
{
  "status": true,
  "getAllBlogs": {
    "title": "Honey Dew",
    "description": "a honey dew book",
    "author": "Doja",
    "state": "published",
    "read_count": 1,
    "reading_time": "1 minute(s)",
    "tags": [
      "honey"
    ],
    "body": "A honey dew book by a known author and defined tags",
    "timestamp": "2022-11-05T22:58:43.843Z",
    "user": "6366e830381ba8802a24e5bc",
    "id": "6366eaa3381ba8802a24e5c0"
  }
}


Get Published State
Route: /blog/id:id
Method: GET
Responses
Success
{
  "status": true,
  "getBlog": {
    "title": "Honey Dew",
    "description": "a honey dew book",
    "author": "Doja",
    "state": "published",
    "read_count": 2,
    "reading_time": "1 minute(s)",
    "tags": [
      "honey"
    ],
    "body": "A honey dew book by a known author and defined tags",
    "timestamp": "2022-11-05T22:58:43.843Z",
    "user": "6366e830381ba8802a24e5bc",
    "id": "6366eaa3381ba8802a24e5c0"
  }
}


Get Draft State
Route: /blog/draft:id
Method: GET
Header:
Authorization: Bearer {token}
Responses
Success
{
  "status": true,
  "getAuthorDrafts": [
    {
      "title": "Honey Dew",
      "description": "a honey dew book",
      "author": "Doja",
      "state": "draft",
      "read_count": 1,
      "reading_time": "1 minute(s)",
      "tags": [
        "honey"
      ],
      "body": "A honey dew book by a known author and defined tags",
      "timestamp": "2022-11-05T22:58:43.843Z",
      "user": "6366e830381ba8802a24e5bc",
      "id": "6366eaa3381ba8802a24e5c0"
    }
  ]
}

Update Blog
Route: /blog:id
Method: PUT
Header:
Authorization: Bearer {token}
Responses
Success
{
  "message": "Updated successfully",
  "data": {
    "title": "Honey Dew",
    "description": "a honey dew book",
    "author": "Doja",
    "state": "published",
    "read_count": 1,
    "reading_time": "1 minute(s)",
    "tags": [
      "honey"
    ],
    "body": "A honey dew book by a known author and defined tags",
    "timestamp": "2022-11-05T22:58:43.843Z",
    "user": "6366e830381ba8802a24e5bc",
    "id": "6366eaa3381ba8802a24e5c0"
  }
}


Delete Blog
Route: /blog:id
Method: DELETE
Header:
Authorization: Bearer {token}
Responses
Success
{
  "message": "Blog deleted successfully",
  "data": {
    "title": "Honey Dew",
    "description": "a honey dew book",
    "author": "Doja",
    "state": "published",
    "read_count": 4,
    "reading_time": "1 minute(s)",
    "tags": [
      "honey"
    ],
    "body": "A honey dew book by a known author and defined tags",
    "timestamp": "2022-11-05T22:58:43.843Z",
    "user": "6366e830381ba8802a24e5bc",
    "id": "6366eaa3381ba8802a24e5c0"
  }
}





